<!DOCTYPE html>
<html>
  <head>
    <title>User manual</title>
	<link rel="stylesheet" type="text/css" href="style.css">
  <link rel="icon" href="imgs/logo.png">
  </head>
  <body>
    <header class="w3-container w3-center w3-padding-32">
      <div class="row">
        <div class="column">
            <img src="imgs/logo.png" style="width:8%">
        </div>
        <div class="column">
          <h1><b>USER MANUAL</b></h1>
      	  <p>Welcome to the user manual for the <span class="w3-tag">BrainMapper</span> software.</p>
        </div>
      </div>
  	</header>

    <div class="row">
      <div class="column-left">
        <div class="w3-card w3-margin w3-margin-top">
          <div id="toc_container">
            <p class="toc_title">Contents - Import/Export</p>
            <a href="index.html" style="color : #5577ee"> Go back to home page </a>
            <ul class="toc_list">
        	   <li><a href="#workspace"><strong>5.1 Workspace</strong></a></li>
        	    <ul>
        		      <li><a href="#what">5.1.1 What is it?</a></li>
        		      <li><a href="#import_workspace">5.1.2 Import workspace</a></li>
        		      <li><a href="#export_workspace">5.1.3 Export workspace</a></li>
        	      </ul>
        	   <li><a href="#export"><strong>5.2 Export an Image Collection</strong></a></li>
        	    <ul>
        		      <li><a href="#export_nifti">5.2.1 As a NIfTI file</a></li>
        		      <li><a href="#export_csv">5.2.2 As a CSV (Excel) file</a></li>
        	      </ul>
          </div>
        </div>
      </div>
      <div class="column-right">
        <div id="ImportExport">
          <h1> Import/Export</h1>
        	<h2 id="workspace">5.1 Workspace</h2>
			<h3 id="what">5.1.1 What is it?</h3>
			<p>
				A workspace is a folder (for example named 'root') containing all data (sets, sub sets and image collections).
				<ul>
        		      <li>A set is a folder containing folders and/or NIfTI files (.nii)</li>
        		      <li>A sub set is a folder inside a folder representing the parent set, containing folders and/or NIfTI files (.nii)</li>
        		      <li>An image collection is a folder containing only NIfTI files (.nii)</li>
					<li>Warning : check your folder, if it contains the root folder, it may fail.</li>
        	      </ul>
			</p>
			<p>
        		<img src="imgs/workspace.jpg" style="width:80%">
        	</p>
			<h3 id="import_workspace">5.1.2 Import workspace</h3>
			<p>
				To import your workspace, you have to respect the structure shown in <a href="#what">the previous section</a>. Select the button "Workspace" in the menu. Then click on "Import from workspace".
			</p>
			<p> Then, choose a directory. This directory will be the root of your workspace. That mean all the data (sets, and image collections) will be in it, directly. For an example, see <a href="#what">the previous section</a> image.
			</p>
			<p>
				To avoid any loss of data, a check will be made. If an error occurs, your workspace does not meet one of the following prerequisites:
				<ul>
        		      <li>Our workspace does not respect the structure. To fix it, please read <a href="#what">the previous section</a> to understand why your structure is not correct.</li>
					  <li>Some sets or subsets have the same name (in your workspace OR between your workspace and the current state of the software). To fix it, please check your sets names.</li>
					  <li>Some image collection have the same name (in your workspace OR between your workspace and the current state of the software). To fix it, please check your image collections names.</li>
					  <li></li>
        	      </ul>
			</p>
			<h3 id="export_workspace">5.1.3 Export workspace</h3>
			<p>
				To export your workspace, select the button "Workspace" in the menu. Then click on "Export workspace". Then, select a directory where the workspace will be saved.
			</p>
			<p>
				Note : this operation will save all the NIfTI files on your computer. Please check that you have enough space on your computer before this operation, to prevent any damage.
			</p>
			<p>
				One you saved your workspace, you can exit the software. You will be able to import it again later, in another instance of the software. If you reimport it in the same instance, then you will have an error. That's because all your data is already in the software (and name the same way), even if you changed some things in it.
			</p>
			<p>
				We recommand to save your work when your done. And load your workspace when you come back at it, with another instance of the software.
			</p>
			<h2 id="export">5.2 Export an Image Collection</h2>
      <p>
				To export your selcted image Collection, select the button "Export data" in the main page of the software. This operation let you choose between the export to NifTI and the export to CSV. The pop-up shown remember you the number of image collection and NifTI image selected.
			</p>
			<h3 id="export_nifti">5.2.1 As a NIfTI file</h3>
			<p>
				After this step, to export as a NifTI file, select the button "Export to NIfTI" and click "Apply". This operation let you choose where you want to save these files.
			</p>
      <p>
				To take less place on the computer, NIfTI images are compressed ("nii.gz").
			</p>
      <p>
				Note : this operation will save all the NIfTI files on your computer. Please check that you have enough space on your computer before this operation, to prevent any damage.
			</p>
			<h3 id="export_csv">5.2.2 As a CSV (Excel) file</h3>
			<p>
				After this step, to export as a CSV file, select the button "Export to CSV" and click to "Apply". An other pop-up will appear. This let you choose between "Export all points" (all the points with an intensity other than 0) and "Export only the centroid of each file". After choosing your export way, click on the "Apply" button and choose where you want to save the CSV file.
			</p>
      <p>
				The first line of the CSV contains the header of each column. These are :
        <ul>
               <li>File_Name_NIfTI : file name of the file associate to voxel. </li>
               <li>Surgeon_ID : ID of the surgeon who make this file.</li>
               <li>Patient_ID : ID of the patient.</li>
               <li>Localisation : area of the brain.</li>
               <li>Point_Name : voxel name.</li>
               <li>Type_Of_Answer : brain fonctionnality associate to this voxel.</li>
               <li>X : X coordinate.</li>
               <li>Y : Y coordinate.</li>
               <li>Z : Z coordinate.</li>
               <li>Intensity : voxel intensity.</li>

               </ul>
			</p>
      <p>
				Note : the software use the use the mni 152 coordinate system. Thus we use "mni_icbm152_t1_tal_nlin_asym_09a" as template. You can find all the mni template at <a href="http://www.bic.mni.mcgill.ca/ServicesAtlases/ICBM152NLin2009" target="_blank">link</a>.
			</p>
      <p>
				Only "File_Name_NIfTI", "Point_Name", "X", "Y", "Z" and "Intensity" are auto-implemented by the software. The others columns are here to add medical informations.
			</p>
        </div>
      </div>
    </div>

    <footer class="w3-container w3-dark-grey w3-padding-32 w3-margin-top">
      <div class="column-left">
  	     <p>Source code available on <a href="https://github.com/TELECOMNancy/brainMapper" target="_blank">GitHub repository</a></p>
      </div>
      <div>
        <p> <b>Authors</b>: R. Agathon (@yoshcraft), M. Cluchague (@maximeCluchague), G. Husson (@Graziella-Husson), V. Zelaya (@vz-chameleon)
      </div>
  	</footer>
  </body>
</html>
